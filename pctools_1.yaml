port: 7890
socks-port: 7891
mixed-port: 7892
allow-lan: true
mode: rule
log-level: info
external-controller: '0.0.0.0:9090'
clash-for-android:
    append-system-dns: false
profile:
    tracing: false ## default=true
dns:
    enabled: true
    enhanced-mode: fake-ip ## redir-host
    listen: 127.0.0.1:1053
    ipv6: false
##    default-nameserver: [223.5.5.5, 119.29.29.29]
    use-hosts: true
    nameserver: ['tls://1.1.1.1:853', 'tls://1.0.0.1:853'] ## 'tls://8.8.4.4:853', 'tls://1.0.0.1:853', 'https://doh.dns.sb/dns-query', 'https://dns.cloudflare.com/dns-query', 'https://dns.twnic.tw/dns-query', ## ['https://doh.pub/dns-query', 'https://dns.alidns.com/dns-query']
    fallback: ['tls://1.1.1.1:853', 'tls://1.0.0.1:853'] ## 'https://doh.dns.sb/dns-query', 'https://dns.cloudflare.com/dns-query', 'https://dns.twnic.tw/dns-query', 
    fallback-filter: { geoip: true, ipcidr: [240.0.0.0/4, 0.0.0.0/32] }
    fake-ip-range: 198.18.0.1/16
    fake-ip-filter:
        - "*.lan"
        - "*.localdomain"
        - "*.example"
        - "*.invalid"
        - "*.localhost"
        - "*.test"
        - "*.local"
        - "*.home.arpa"
        - time.*.com
        - time.*.gov
        - time.*.edu.cn
        - time.*.apple.com
        - time1.*.com
        - time2.*.com
        - time3.*.com
        - time4.*.com
        - time5.*.com
        - time6.*.com
        - time7.*.com
        - ntp.*.com
        - ntp1.*.com
        - ntp2.*.com
        - ntp3.*.com
        - ntp4.*.com
        - ntp5.*.com
        - ntp6.*.com
        - ntp7.*.com
        - "*.time.edu.cn"
        - "*.ntp.org.cn"
        - +.pool.ntp.org
        - time1.cloud.tencent.com
        - music.163.com
        - "*.music.163.com"
        - "*.126.net"
        - musicapi.taihe.com
        - music.taihe.com
        - songsearch.kugou.com
        - trackercdn.kugou.com
        - "*.kuwo.cn"
        - api-jooxtt.sanook.com
        - api.joox.com
        - joox.com
        - y.qq.com
        - "*.y.qq.com"
        - streamoc.music.tc.qq.com
        - mobileoc.music.tc.qq.com
        - isure.stream.qqmusic.qq.com
        - dl.stream.qqmusic.qq.com
        - aqqmusic.tc.qq.com
        - amobile.music.tc.qq.com
        - "*.xiami.com"
        - "*.music.migu.cn"
        - music.migu.cn
        - "*.msftconnecttest.com"
        - "*.msftncsi.com"
        - msftconnecttest.com
        - msftncsi.com
        - localhost.ptlogin2.qq.com
        - localhost.sec.qq.com
        - +.srv.nintendo.net
        - +.stun.playstation.net
        - xbox.*.microsoft.com
        - xnotify.xboxlive.com
        - +.battlenet.com.cn
        - +.wotgame.cn
        - +.wggames.cn
        - +.wowsgame.cn
        - +.wargaming.net
        - proxy.golang.org
        - stun.*.*
        - stun.*.*.*
        - +.stun.*.*
        - +.stun.*.*.*
        - +.stun.*.*.*.*
        - heartbeat.belkin.com
        - "*.linksys.com"
        - "*.linksyssmartwifi.com"
        - "*.router.asus.com"
        - mesu.apple.com
        - swscan.apple.com
        - swquery.apple.com
        - swdownload.apple.com
        - swcdn.apple.com
        - swdist.apple.com
        - lens.l.google.com
        - stun.l.google.com
        - +.nflxvideo.net
        - "*.square-enix.com"
        - "*.finalfantasyxiv.com"
        - "*.ffxiv.com"
        - "*.mcdn.bilivideo.cn"
        - +.media.dssott.com

proxies:
  - { name: 'vmess1', type: vmess, server: space.byu.id, port: 443, uuid: bf67437e-6c90-45ca-abc2-c7240a5ce2aa, alterId: 0, cipher: auto, tls: true, skip-cert-verify: true, servername: foxlux.fovi.tk, network: ws, ws-opts: { path: /eisasqa, headers: { host: foxlux.fovi.tk}, mux: false}, udp: true}
proxy-groups:
  - name: Proxy
    type: select
    proxies:
      - ⚖️ Load balancing - Hashing
      - ⚖️ Load balancing - Polling
      - vmess1
  - name: ⚖️ Load balancing - Hashing
    type: load-balance
    url: http://www.google.com/generate_204
    interval: 300
    strategy: consistent-hashing # consistent-hashing
    proxies:
      - vmess1
  - name: ⚖️ Load balancing - Polling
    type: load-balance
    url: http://www.google.com/generate_204
    interval: 300
    strategy: round-robin
    proxies:
      - vmess1
rules:
  - DOMAIN-SUFFIX,google.com,Proxy
  - DOMAIN-KEYWORD,google,Proxy
  - DOMAIN,google.com,Proxy
  - IP-CIDR,127.0.0.0/8,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,Proxy
